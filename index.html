<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yatrafy GenZ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        body { background-color: #e5e5e5; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; }
        
        .fade-in { animation: fadeIn 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards; opacity: 0; transform: translateY(10px); }
        @keyframes fadeIn { to { opacity: 1; transform: translateY(0); } }
        
        .scan-laser { 
            position: absolute; top: 0; left: 0; width: 100%; height: 2px; background: #8b5cf6; 
            box-shadow: 0 0 15px #8b5cf6; animation: scan 1.5s ease-in-out infinite; 
        }
        @keyframes scan { 0% { top: 0%; opacity: 0; } 10% { opacity: 1; } 90% { opacity: 1; } 100% { top: 100%; opacity: 0; } }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen py-10">

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- GEN Z QUESTIONS ---
        const QUESTIONS = [
            { id: 1, text: "First off, what's the vibe? ‚ú®", options: ["Chill / Relaxing üßò", "Adventure / Thrills üßó", "Aesthetic / Heritage üè∞", "Party / Lit üéâ"] },
            { id: 2, text: "Who's the squad? üëØ‚Äç‚ôÄÔ∏è", options: ["Solo (Main Character)", "Bae ‚ù§Ô∏è", "The Gang", "Family (Wholesome)"] },
            { id: 3, text: "Headcount? How many ppl? üî¢", options: ["Just Me", "2 ppl", "3-5 besties", "Whole crowd (6+)"] },
            { id: 4, text: "What's the damage? (Budget) üí∏", options: ["Broke but happy (<20k)", "Mid-range (30-50k)", "Baller Status (1L+)"] },
            { id: 5, text: "How long we gone for? üóìÔ∏è", options: ["Quick Weekend", "4-5 Days", "Long Vacay"] },
            { id: 6, text: "Travel preference? üöÜ‚úàÔ∏è", options: ["Flight (Fast)", "Train (Vibe)", "Roadtrip"] },
            { id: 7, text: "Pace check? ‚ö°", options: ["Lazy / Slow", "Packed Itinerary", "Balanced"] }
        ];

        const YatrafyApp = () => {
            const [messages, setMessages] = useState([
                { id: 1, sender: 'bot', type: 'text', content: "Yo! I'm Yatrafy. üåç Finna help you plan the sickest trip. I got 7 quick questions to catch your vibe. Ready?" }
            ]);
            
            const [qIndex, setQIndex] = useState(0);
            const [quizFinished, setQuizFinished] = useState(false);
            const [isTyping, setIsTyping] = useState(false);
            const chatEndRef = useRef(null);

            useEffect(() => chatEndRef.current?.scrollIntoView({ behavior: "smooth" }), [messages, isTyping]);

            // --- INTERACTION LOGIC ---
            const handleInteraction = (type, payload) => {
                
                // 1. QUIZ
                if (type === 'ANSWER') {
                    addMsg('user', 'text', payload);
                    
                    if (qIndex < QUESTIONS.length - 1) {
                        setQIndex(prev => prev + 1);
                        simulateThinking(600, () => {
                            addMsg('bot', 'question', QUESTIONS[qIndex + 1]);
                        });
                    } else {
                        setQuizFinished(true);
                        simulateThinking(1500, () => {
                            addMsg('bot', 'text', "Bet. Based on 'The Gang', 'Heritage' & 'Mid-range', these spots hit different:");
                            setTimeout(() => addMsg('bot', 'destinations', null), 800);
                        });
                    }
                }

                // 2. DESTINATION
                else if (type === 'CHOOSE_DEST') {
                    addMsg('user', 'text', `Let's pull up to ${payload}!`);
                    simulateThinking(1200, () => {
                        addMsg('bot', 'text', `Solid choice. üè∞ ${payload} is honestly a vibe rn. How we getting there?`);
                        setTimeout(() => addMsg('bot', 'travel_options', null), 1000);
                    });
                }

                // 3. TRAVEL
                else if (type === 'CHOOSE_TRAVEL') {
                    addMsg('user', 'text', `Lock in ${payload}`);
                    simulateThinking(1200, () => {
                        addMsg('bot', 'text', "Say less. ‚úàÔ∏è Flight secured. Now, where we crashing? Found these aesthetic stays:");
                        setTimeout(() => addMsg('bot', 'hotel_options', null), 1000);
                    });
                }

                // 4. HOTEL
                else if (type === 'CHOOSE_HOTEL') {
                    addMsg('user', 'text', `Book ${payload}`);
                    simulateThinking(1500, () => {
                        addMsg('bot', 'text', "W Hotel choice. üè® Here's the itinerary. It's giving organized queen. üíÖ");
                        setTimeout(() => addMsg('bot', 'itinerary', null), 1000);
                    });
                }

                // 5. CONFIRM
                else if (type === 'CONFIRM_ITINERARY') {
                    addMsg('user', 'text', "No cap, this looks fire.");
                    simulateThinking(1000, () => {
                        addMsg('bot', 'invoice', null);
                    });
                }

                // 6. PAY
                else if (type === 'PAY_NOW') {
                    addMsg('user', 'text', "Secure the bag (tickets).");
                    simulateThinking(1000, () => {
                        addMsg('bot', 'qr', null);
                    });
                }

                // 7. SUCCESS
                else if (type === 'SCAN_SUCCESS') {
                    addMsg('user', 'text', "Paid.");
                    setIsTyping("Checking payment...");
                    setTimeout(() => {
                        setIsTyping(false);
                        addMsg('bot', 'success', null);
                        setTimeout(() => addMsg('bot', 'downloads', null), 1500);
                    }, 2000);
                }
            };

            const addMsg = (sender, type, content) => {
                setMessages(prev => [...prev, { id: Date.now(), sender, type, content }]);
            };

            const simulateThinking = (time, cb) => {
                setIsTyping(true);
                setTimeout(() => { setIsTyping(false); cb(); }, time);
            };

            return (
                // PHONE CONTAINER: iPhone 14 Pro Dimensions (393x852 approx)
                <div className="w-[390px] h-[844px] bg-white border-[10px] border-gray-900 rounded-[3rem] overflow-hidden shadow-2xl relative flex flex-col font-sans ring-4 ring-gray-300">
                    
                    {/* DYNAMIC ISLAND / NOTCH */}
                    <div className="absolute top-0 left-1/2 -translate-x-1/2 w-[120px] h-[35px] bg-black rounded-b-3xl z-30 flex items-center justify-center">
                        <div className="w-16 h-2 bg-gray-800 rounded-full opacity-50"></div>
                    </div>

                    {/* STATUS BAR */}
                    <div className="flex justify-between items-center px-6 pt-3 pb-2 text-xs font-bold text-gray-800 z-20 bg-white/80 backdrop-blur-sm">
                        <span>9:41</span>
                        <div className="flex gap-1.5">
                            <span className="w-4 h-2.5 bg-black rounded-sm"></span>
                            <span className="w-2.5 h-2.5 bg-black rounded-full"></span>
                        </div>
                    </div>

                    {/* HEADER */}
                    <div className="px-5 pb-4 pt-2 border-b border-gray-100 flex justify-between items-center bg-white/90 backdrop-blur z-10">
                        <div className="flex items-center gap-2">
                            <div className="w-9 h-9 bg-gradient-to-tr from-violet-500 to-fuchsia-500 rounded-full flex items-center justify-center text-white font-bold text-lg shadow-md">Y</div>
                            <div>
                                <h1 className="font-extrabold text-sm text-gray-900 tracking-tight">Yatrafy AI ‚ú®</h1>
                                <p className="text-[10px] text-green-500 font-bold">‚óè Online</p>
                            </div>
                        </div>
                        {!quizFinished && <div className="text-[10px] font-bold bg-gray-100 px-2 py-1 rounded-full">Step {qIndex + 1}/7</div>}
                    </div>

                    {/* CHAT AREA */}
                    <div className="flex-1 overflow-y-auto p-4 space-y-5 bg-gray-50 pb-28">
                        
                        {messages.length === 1 && (
                            <div className="flex justify-center mt-6">
                                <button onClick={() => handleInteraction('ANSWER', "Let's Go!")} className="bg-black text-white px-6 py-3 rounded-full text-sm font-bold shadow-lg hover:scale-105 transition transform">
                                    Start Planning üöÄ
                                </button>
                            </div>
                        )}

                        {messages.map((msg) => (
                            <div key={msg.id} className={`flex w-full fade-in ${msg.sender === 'user' ? 'justify-end' : 'justify-start'}`}>
                                
                                {msg.sender === 'bot' && <div className="w-8 h-8 rounded-full bg-violet-100 flex items-center justify-center mr-2 mt-1 text-sm shadow-sm">ü§ñ</div>}
                                
                                <div className={`max-w-[85%] ${msg.type === 'text' ? (msg.sender === 'user' ? 'bg-black text-white rounded-br-none' : 'bg-white text-gray-900 border border-gray-100 rounded-bl-none shadow-sm') : 'w-full'} rounded-2xl p-3 text-sm leading-relaxed`}>
                                    
                                    {msg.type === 'text' && <p>{msg.content}</p>}

                                    {/* QUESTIONS */}
                                    {msg.type === 'question' && (
                                        <div>
                                            <p className="font-bold text-gray-900 mb-2.5">{msg.content.text}</p>
                                            <div className="flex flex-wrap gap-2">
                                                {msg.content.options.map(opt => (
                                                    <button key={opt} onClick={() => handleInteraction('ANSWER', opt)} className="bg-white border border-violet-200 text-violet-700 hover:bg-violet-50 px-3 py-2 rounded-xl text-xs font-bold transition shadow-sm">
                                                        {opt}
                                                    </button>
                                                ))}
                                            </div>
                                        </div>
                                    )}

                                    {/* DESTINATIONS */}
                                    {msg.type === 'destinations' && (
                                        <div className="flex overflow-x-auto gap-3 pb-2 no-scrollbar -mx-2 px-2">
                                            <div className="min-w-[240px] bg-white rounded-2xl overflow-hidden shadow-lg border border-gray-100 cursor-pointer active:scale-95 transition" onClick={() => handleInteraction('CHOOSE_DEST', 'Jaipur')}>
                                                <div className="h-32 bg-gray-200 relative">
                                                    <img src="https://images.unsplash.com/photo-1477587458883-47145ed94245?auto=format&fit=crop&w=400&q=80" className="w-full h-full object-cover"/>
                                                    <div className="absolute top-2 right-2 bg-white/90 backdrop-blur px-2 py-0.5 rounded-full text-[10px] font-bold">98% Match</div>
                                                </div>
                                                <div className="p-3">
                                                    <h3 className="font-bold text-gray-900">Jaipur, Rajasthan</h3>
                                                    <p className="text-[10px] text-gray-500 mb-3">Aesthetic ‚Ä¢ Royal ‚Ä¢ Food</p>
                                                    <button className="w-full bg-black text-white py-2 rounded-lg text-xs font-bold">Pick This Spot</button>
                                                </div>
                                            </div>
                                            <div className="min-w-[240px] bg-white rounded-2xl overflow-hidden shadow-lg border border-gray-100 opacity-60 grayscale-[50%]">
                                                <div className="h-32 bg-gray-200 relative">
                                                    <img src="https://images.unsplash.com/photo-1596205869387-a2992d5395f1?auto=format&fit=crop&w=400&q=80" className="w-full h-full object-cover"/>
                                                </div>
                                                <div className="p-3">
                                                    <h3 className="font-bold text-gray-900">Goa</h3>
                                                    <p className="text-[10px] text-gray-500">Party ‚Ä¢ Beach</p>
                                                </div>
                                            </div>
                                        </div>
                                    )}

                                    {/* TRAVEL OPTIONS */}
                                    {msg.type === 'travel_options' && (
                                        <div className="space-y-3">
                                            <div className="bg-white p-3 rounded-2xl border border-violet-100 shadow-sm cursor-pointer hover:border-violet-400 transition" onClick={() => handleInteraction('CHOOSE_TRAVEL', 'Indigo Flight')}>
                                                <div className="flex gap-3 items-center">
                                                    <div className="w-12 h-12 rounded-xl bg-gray-100 overflow-hidden"><img src="https://images.unsplash.com/photo-1436491865332-7a61a109cc05?auto=format&fit=crop&w=100&q=80" className="object-cover w-full h-full"/></div>
                                                    <div className="flex-1">
                                                        <div className="flex justify-between"><h3 className="font-bold text-xs">Indigo 6E-404</h3><span className="font-bold text-violet-600">‚Çπ4,200</span></div>
                                                        <p className="text-[10px] text-gray-500">06:00 AM ‚Ä¢ Fast AF ‚úàÔ∏è</p>
                                                    </div>
                                                </div>
                                            </div>
                                            <div className="bg-white p-3 rounded-2xl border border-gray-100 shadow-sm opacity-60">
                                                <div className="flex gap-3 items-center">
                                                    <div className="w-12 h-12 rounded-xl bg-gray-100 overflow-hidden"><img src="https://images.unsplash.com/photo-1535535112387-56ffe8db21ff?auto=format&fit=crop&w=100&q=80" className="object-cover w-full h-full"/></div>
                                                    <div className="flex-1">
                                                        <div className="flex justify-between"><h3 className="font-bold text-xs">Vande Bharat</h3><span className="font-bold text-gray-600">‚Çπ1,800</span></div>
                                                        <p className="text-[10px] text-gray-500">06:10 AM ‚Ä¢ Scenic Route üöÜ</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    )}

                                    {/* HOTELS */}
                                    {msg.type === 'hotel_options' && (
                                        <div className="flex overflow-x-auto gap-3 pb-2 no-scrollbar -mx-2 px-2">
                                            <div className="min-w-[220px] bg-white rounded-2xl overflow-hidden shadow-md border cursor-pointer" onClick={() => handleInteraction('CHOOSE_HOTEL', 'Heritage Haveli')}>
                                                <img src="https://images.unsplash.com/photo-1566073771259-6a8506099945?auto=format&fit=crop&w=300&q=80" className="w-full h-28 object-cover"/>
                                                <div className="p-3">
                                                    <h3 className="font-bold text-gray-900 text-sm">Heritage Haveli</h3>
                                                    <p className="text-[10px] text-gray-500">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê ‚Ä¢ Aesthetic Pool</p>
                                                    <div className="flex justify-between mt-2 items-center">
                                                        <span className="font-bold text-violet-600 text-xs">‚Çπ8.5k/n</span>
                                                        <span className="bg-black text-white px-2 py-1 rounded-lg text-[10px] font-bold">Book</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    )}

                                    {/* ITINERARY */}
                                    {msg.type === 'itinerary' && (
                                        <div className="bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden">
                                            <div className="bg-violet-50 p-3 border-b border-violet-100"><h3 className="font-bold text-violet-900 text-xs">3-Day Plan (Main Character Energy)</h3></div>
                                            <div className="p-4 relative">
                                                <div className="absolute left-[20px] top-4 bottom-4 w-0.5 bg-gray-200"></div>
                                                <div className="mb-4 relative z-10 pl-2">
                                                    <div className="bg-white border border-gray-200 p-2 rounded-xl shadow-sm flex gap-3 items-center">
                                                        <div className="w-8 h-8 rounded-full bg-orange-100 flex items-center justify-center text-sm shrink-0">üè∞</div>
                                                        <div><h4 className="font-bold text-xs text-gray-900">Day 1: Royal Vibes</h4><p className="text-[10px] text-gray-500">Amer Fort ‚Ä¢ Reels Spot üì∏</p></div>
                                                    </div>
                                                </div>
                                                <div className="mb-4 relative z-10 pl-2">
                                                    <div className="bg-white border border-gray-200 p-2 rounded-xl shadow-sm flex gap-3 items-center">
                                                        <div className="w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center text-sm shrink-0">üçπ</div>
                                                        <div><h4 className="font-bold text-xs text-gray-900">Day 2: Chill & Shop</h4><p className="text-[10px] text-gray-500">Poolside ‚Ä¢ Bapu Bazaar Haul</p></div>
                                                    </div>
                                                </div>
                                                <div className="relative z-10 pl-2">
                                                    <div className="bg-white border border-gray-200 p-2 rounded-xl shadow-sm flex gap-3 items-center">
                                                        <div className="w-8 h-8 rounded-full bg-green-100 flex items-center justify-center text-sm shrink-0">‚úàÔ∏è</div>
                                                        <div><h4 className="font-bold text-xs text-gray-900">Day 3: Dip</h4><p className="text-[10px] text-gray-500">Breakfast & Airport</p></div>
                                                    </div>
                                                </div>
                                            </div>
                                            <button onClick={() => handleInteraction('CONFIRM_ITINERARY')} className="w-full bg-black text-white py-3 text-xs font-bold hover:bg-gray-800 transition">Lock It In üîí</button>
                                        </div>
                                    )}

                                    {/* INVOICE */}
                                    {msg.type === 'invoice' && (
                                        <div className="bg-white rounded-2xl shadow-md border p-4">
                                            <h3 className="font-bold text-gray-900 border-b pb-2 mb-2 text-sm">The Damage üßæ</h3>
                                            <div className="space-y-1 text-xs text-gray-500 mb-3">
                                                <div className="flex justify-between"><span>Flights (Squad)</span><span>‚Çπ12,600</span></div>
                                                <div className="flex justify-between"><span>Haveli (2 Nights)</span><span>‚Çπ34,000</span></div>
                                                <div className="flex justify-between text-green-600"><span>GenZ Discount</span><span>-‚Çπ3,000</span></div>
                                                <div className="flex justify-between text-gray-900 font-extrabold border-t pt-2 mt-2 text-sm"><span>Total</span><span>‚Çπ43,600</span></div>
                                            </div>
                                            <button onClick={() => handleInteraction('PAY_NOW')} className="w-full bg-violet-600 text-white py-3 rounded-xl font-bold text-xs hover:bg-violet-700 shadow-lg shadow-violet-200">Secure The Bag üí≥</button>
                                        </div>
                                    )}

                                    {/* QR */}
                                    {msg.type === 'qr' && (
                                        <div className="bg-white rounded-2xl shadow-lg border p-1 overflow-hidden">
                                            <div className="bg-gray-50 p-2 text-center text-[10px] text-gray-400 font-mono">ENCRYPTED GATEWAY</div>
                                            <div className="p-4 flex justify-center relative">
                                                <div className="relative border-2 border-black p-2 rounded-xl bg-white">
                                                    <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=upi://pay?pa=yatrafy@upi&pn=Yatrafy" className="w-32 h-32"/>
                                                    <div className="scan-laser"></div>
                                                </div>
                                            </div>
                                            <button onClick={() => handleInteraction('SCAN_SUCCESS')} className="w-full bg-green-50 text-green-700 py-2.5 font-bold text-xs border-t border-green-100">Tap to Pay (Sim)</button>
                                        </div>
                                    )}

                                    {/* SUCCESS */}
                                    {msg.type === 'success' && (
                                        <div className="bg-green-500 text-white p-6 rounded-2xl text-center shadow-xl">
                                            <div className="w-12 h-12 bg-white rounded-full flex items-center justify-center mx-auto mb-2 text-green-500 text-xl font-bold">‚úì</div>
                                            <h2 className="font-bold text-lg">We Outside! üå¥</h2>
                                            <p className="text-xs text-green-100 opacity-90">Trip Confirmed. Pack your bags.</p>
                                        </div>
                                    )}

                                    {/* DOWNLOADS */}
                                    {msg.type === 'downloads' && (
                                        <div className="bg-white rounded-2xl shadow-md border divide-y overflow-hidden">
                                            <div className="p-3 flex items-center justify-between hover:bg-gray-50 cursor-pointer">
                                                <div className="flex items-center gap-3">
                                                    <div className="bg-red-500 w-8 h-8 rounded-lg flex items-center justify-center text-white text-[10px] font-bold">PDF</div>
                                                    <span className="text-xs font-bold text-gray-800">Flight_Tix.pdf</span>
                                                </div>
                                                <span className="text-gray-400">‚¨á</span>
                                            </div>
                                            <div className="p-3 flex items-center justify-between hover:bg-gray-50 cursor-pointer">
                                                <div className="flex items-center gap-3">
                                                    <div className="bg-blue-500 w-8 h-8 rounded-lg flex items-center justify-center text-white text-[10px] font-bold">PDF</div>
                                                    <span className="text-xs font-bold text-gray-800">Itinerary.pdf</span>
                                                </div>
                                                <span className="text-gray-400">‚¨á</span>
                                            </div>
                                        </div>
                                    )}

                                </div>
                            </div>
                        ))}

                        {/* TYPING DOTS */}
                        {isTyping && (
                            <div className="flex justify-start w-full">
                                <div className="w-8 h-8 rounded-full bg-violet-100 flex items-center justify-center mr-2"><span className="text-sm">ü§ñ</span></div>
                                <div className="bg-gray-100 rounded-2xl rounded-bl-none p-3 px-4 flex gap-1 items-center h-10">
                                    <div className="w-1.5 h-1.5 bg-gray-400 rounded-full animate-bounce"></div>
                                    <div className="w-1.5 h-1.5 bg-gray-400 rounded-full animate-bounce delay-75"></div>
                                    <div className="w-1.5 h-1.5 bg-gray-400 rounded-full animate-bounce delay-150"></div>
                                </div>
                            </div>
                        )}
                        <div ref={chatEndRef} />
                    </div>

                    {/* INPUT BAR */}
                    <div className="absolute bottom-6 w-[90%] left-[5%] bg-white/80 backdrop-blur-md border border-white/50 p-2 rounded-full shadow-lg z-20 flex gap-2 items-center">
                        <div className="w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-gray-400">‚ûï</div>
                        <input 
                            type="text" 
                            placeholder="Select an option..."
                            className="bg-transparent flex-1 outline-none text-sm text-gray-700 placeholder-gray-500 font-medium"
                            disabled
                        />
                        <div className="w-8 h-8 bg-black rounded-full flex items-center justify-center text-white text-xs">‚û§</div>
                    </div>
                    
                    {/* HOME INDICATOR */}
                    <div className="absolute bottom-1 left-1/2 -translate-x-1/2 w-32 h-1 bg-black rounded-full z-30"></div>

                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<YatrafyApp />);
    </script>
</body>
</html>
